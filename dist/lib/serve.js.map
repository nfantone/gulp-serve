{"version":3,"sources":["lib/serve.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;sBAEC,QAAQ;;;;2BACF,cAAc;;;;2BACV,cAAc;;;;mCACpB,uBAAuB;;;;IAEnC,UAAU;AACJ,UADN,UAAU,GACQ;MAAX,MAAM,yDAAC,EAAE;;wBADhB,UAAU;;AAEd,MAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,SAAO,CAAC,GAAG,CAAC,4BAA4B,GAAG,GAAG,CAAC;EAC/C;;cAJI,UAAU;;;;;;SAST,iBAAC,EAAE,EAAE;AACV,OAAI,EAAE,GAAG,yBAAY,MAAM,EAAE,CAAC;AAC9B,OAAI,OAAO,GAAG,EAAE,CAAC;;;;;;AACjB,yBAAc,IAAI,CAAC,MAAM,CAAC,OAAO,8HAAE;SAA1B,CAAC;;AACT,YAAO,CAAC,IAAI,CAAC,sCAAM,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;KAClC;;;;;;;;;;;;;;;;AACD,OAAI,OAAO,GAAG,oBAAE,QAAQ,CAAC;AACxB,cAAU,EAAE,OAAO;AACnB,YAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,OAAO,GAAG,MAAM;IAChD,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACnB,KAAE,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;GACrB;;;;;;;SAKK,gBAAC,EAAE,EAAE;AACV,OAAI,OAAO,GAAG,oBAAE,QAAQ,CAAC;AACxB,WAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO;AAC5B,OAAG,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;IACpC,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACxB,iCAAQ,OAAO,CAAC,CAAC;AACjB,KAAE,EAAE,CAAC;GACL;;;SAEI,eAAC,EAAE,EAAE;AACT,OAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AACvB,QAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IAChB,MAAM;AACN,QAAI,UAAO,CAAC,EAAE,CAAC,CAAC;IAChB;GACD;;;QAxCI,UAAU;;;qBA4CD,UAAU","file":"lib/serve.js","sourcesContent":["'use strict';\n\nimport _ from 'lodash';\nimport nodemon from 'gulp-nodemon';\nimport browserSync from 'browser-sync';\nimport proxy from 'http-proxy-middleware';\n\nclass GulpServer {\n\tconstructor(config={}) {\n\t\tthis.config = config;\n\t\tprocess.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';\n\t}\n\n\t/**\n\t* Configures and initializes a static BrowserSync HTTP server.\n\t*/\n\tstatic(cb) {\n\t\tlet bs = browserSync.create();\n\t\tlet proxies = [];\n\t\tfor (let p of this.config.proxies) {\n\t\t\tproxies.push(proxy(p.context, p));\n\t\t}\n\t\tlet options = _.defaults({\n\t\t\tmiddleware: proxies,\n\t\t\tlogLevel: this.config.verbose ? 'debug' : 'info'\n\t\t}, this.config.bs);\n\t\tbs.init(options, cb);\n\t}\n\n\t/**\n\t * Configures and starts a nodemon daemon.\n\t */\n\tdaemon(cb) {\n\t\tlet options = _.defaults({\n\t\t\tverbose: this.config.verbose,\n\t\t\tenv: { 'NODE_ENV': this.config.env }\n\t\t}, this.config.nodemon);\n\t\tnodemon(options);\n\t\tcb();\n\t}\n\n\tserve(cb) {\n\t\tif (this.config.daemon) {\n\t\t\tthis.daemon(cb);\n\t\t} else {\n\t\t\tthis.static(cb);\n\t\t}\n\t}\n\n}\n\nexport default GulpServer;\n"],"sourceRoot":"/home/nfantone/dev/js/gulp-serve"}